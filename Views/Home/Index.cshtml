@model CuaHangQuanAo.Models.HomeIndexVm
@{
    ViewData["Title"] = "Home Page";
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

<!-- SEARCH AJAX (trang chủ) -->

<style>
    /* Reset và các biến CSS */
    :root {
        --primary: #2d3142;
        --primary-dark: #171a26;
        --secondary: #4f5d75;
        --accent: #ef8354;
        --dark: #121212;
        --light: #f9f9f9;
        --success: #28a745;
        --warning: #ffc107;
        --danger: #dc3545;
        --gray: #6c757d;
        --light-gray: #e9ecef;
        --border-radius: 8px;
        --box-shadow: 0 10px 30px rgba(0,0,0,0.08);
        --transition: all 0.3s ease;
        --font-heading: 'Playfair Display', serif;
        --font-body: 'Roboto', sans-serif;
    }


    body {
        font-family: var(--font-body);
        color: var(--dark);
        background-color: var(--light);
    }

    h1, h2, h3, h4, h5, h6 {
        font-family: var(--font-heading);
    }


    /* Hero section */
    .hero-section {
        position: relative;
        background-color: var(--light-gray);
        border-radius: var(--border-radius);
        overflow: hidden;
        margin-bottom: 6rem;
        box-shadow: var(--box-shadow);
        position: relative;
    }

    .hero-content {
        padding: 5rem 2rem;
        position: relative;
        z-index: 2;
    }

    .hero-title {
        font-weight: 800;
        margin-bottom: 1.2rem;
        font-size: 3.8rem;
        color: var(--primary-dark);
        line-height: 1.1;
        letter-spacing: -0.5px;
    }

    .hero-subtitle {
        font-size: 1.4rem;
        margin-bottom: 2.5rem;
        color: var(--secondary);
        line-height: 1.5;
    }

    .hero-btn {
        padding: 1rem 2.5rem;
        border-radius: 6px;
        font-weight: 600;
        transition: var(--transition);
        text-decoration: none;
        display: inline-block;
        margin-right: 1.2rem;
        margin-bottom: 1rem;
        text-align: center;
        letter-spacing: 0.5px;
        text-transform: uppercase;
        font-size: 0.9rem;
    }

    .hero-btn-primary {
        background: var(--primary);
        color: white;
        box-shadow: 0 4px 15px rgba(45, 49, 66, 0.3);
    }

        .hero-btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(45, 49, 66, 0.4);
            background: var(--primary-dark);
            color: white;
        }

    .hero-btn-outline {
        background: transparent;
        color: var(--primary);
        border: 2px solid var(--primary);
    }

        .hero-btn-outline:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-3px);
        }

    .hero-image {
        border-radius: var(--border-radius);
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        transition: var(--transition);
        object-fit: cover;
        height: 100%;
        max-height: 550px;
    }

        .hero-image:hover {
            transform: scale(1.02);
            box-shadow: 0 12px 30px rgba(0,0,0,0.15);
        }

    /* Các phần khuyến mãi */
    .promo-section {
        position: relative;
        margin: 7rem 0;
    }

    .promo-card {
        position: relative;
        border-radius: var(--border-radius);
        overflow: hidden;
        height: 500px;
        box-shadow: var(--box-shadow);
        transition: var(--transition);
    }

        .promo-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

    .promo-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 1;
        transition: var(--transition);
    }

    .promo-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.8) 100%);
        z-index: 2;
    }

    .promo-content {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        padding: 3rem;
        z-index: 3;
        color: white;
    }

    .promo-badge {
        display: inline-block;
        background: var(--accent);
        color: white;
        padding: 0.6rem 1.2rem;
        border-radius: 4px;
        font-weight: 600;
        margin-bottom: 1.2rem;
        transform: translateY(0);
        transition: var(--transition);
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.8rem;
    }

    .promo-title {
        font-size: 2.8rem;
        font-weight: 800;
        margin-bottom: 1.2rem;
        letter-spacing: -0.5px;
        line-height: 1.1;
    }

    .promo-text {
        font-size: 1.1rem;
        margin-bottom: 2rem;
        max-width: 90%;
        line-height: 1.6;
        opacity: 0.9;
    }

    .promo-btn {
        display: inline-block;
        padding: 0.9rem 2.2rem;
        background: white;
        color: var(--dark);
        border-radius: 4px;
        font-weight: 600;
        text-decoration: none;
        transition: var(--transition);
        transform: translateY(0);
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.85rem;
    }

    .promo-card:hover .promo-image {
        transform: scale(1.05);
    }

    .promo-card:hover .promo-badge {
        transform: translateY(-5px);
    }

    .promo-btn:hover {
        background: var(--accent);
        color: white;
        transform: translateY(-3px);
    }

    /* Product Sections */
    .title {
        font-size: 2.2rem;
        font-weight: 700;
        text-align: center;
        margin: 5rem 0 3rem;
        color: var(--primary);
        position: relative;
        padding-bottom: 1.2rem;
        letter-spacing: -0.5px;
        text-transform: uppercase;
    }

        .title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--accent);
            border-radius: 50px;
        }

    .products {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 2.5rem;
        margin-bottom: 3.5rem;
    }

    .product-img {
        width: 100%;
        height: 350px;
        object-fit: cover;
        border-radius: var(--border-radius) var(--border-radius) 0 0;
        transition: var(--transition);
    }

    .products .product-card {
        background: white;
        border-radius: var(--border-radius);
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        transition: var(--transition);
        display: flex;
        flex-direction: column;
        position: relative;
    }

        .products .product-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--box-shadow);
        }

            .products .product-card:hover .product-img {
                transform: scale(1.05);
            }

    .products .product-title {
        padding: 1.2rem 1.2rem 0.5rem;
        font-size: 1.1rem;
        font-weight: 600;
        color: var(--primary);
    }

        .products .product-title a:hover {
            color: var(--accent) !important;
        }

    .products .product-price {
        padding: 0 1.2rem 1.2rem;
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--primary-dark);
    }

    .products .product-btn {
        display: block;
        margin: 0 1.2rem 1.2rem;
        padding: 0.8rem 1.2rem;
        background: var(--primary);
        color: white !important;
        border-radius: 4px;
        text-align: center;
        font-weight: 600;
        font-size: 0.9rem;
        text-decoration: none;
        transition: var(--transition);
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

        .products .product-btn:hover {
            background: var(--accent);
            transform: translateY(-3px);
        }

    .view-more-btn {
        display: inline-block;
        padding: 1rem 2.5rem;
        background: var(--primary);
        color: white !important;
        border-radius: 4px;
        text-align: center;
        font-weight: 600;
        font-size: 0.9rem;
        text-decoration: none;
        transition: var(--transition);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin: 0 0.5rem;
    }

        .view-more-btn:hover {
            background: var(--accent);
            transform: translateY(-3px);
        }

    /* Badge for new products */
    .product-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        background: var(--accent);
        color: white;
        padding: 0.5rem 0.8rem;
        font-size: 0.8rem;
        font-weight: 600;
        border-radius: 4px;
        z-index: 10;
        text-transform: uppercase;
    }

    /* Slideshow styles */
    .hero-slideshow {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
        border-radius: var(--border-radius);
        box-shadow: var(--box-shadow);
    }

    .slideshow-container {
        position: relative;
        width: 100%;
        height: 550px;
    }

    .slide {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: opacity 1s ease-in-out;
        display: none;
    }

        .slide.active {
            opacity: 1;
            display: block;
        }

        .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: var(--border-radius);
        }

    .slideshow-indicators {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        z-index: 10;
    }

    .indicator {
        width: 12px;
        height: 12px;
        background-color: rgba(255, 255, 255, 0.6);
        border-radius: 50%;
        cursor: pointer;
        transition: var(--transition);
    }

        .indicator.active {
            background-color: var(--accent);
            transform: scale(1.2);
        }


    /* Brand banner section */
    .brand-banner {
        margin: 7rem 0;
        padding: 4rem 0;
        background-color: var(--primary);
        color: white;
    }

    .brand-content {
        text-align: center;
    }

    .brand-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1.5rem;
        letter-spacing: -0.5px;
    }

    .brand-text {
        font-size: 1.2rem;
        max-width: 700px;
        margin: 0 auto 2rem;
        line-height: 1.6;
        opacity: 0.9;
    }

    .brand-values {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 2rem;
        margin-top: 2.5rem;
    }

    .value-item {
        flex: 0 0 calc(25% - 2rem);
        min-width: 180px;
        text-align: center;
    }

    .value-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
        color: var(--accent);
    }

    .value-title {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .value-text {
        font-size: 0.9rem;
        opacity: 0.8;
    }

    /* Newsletter Section - MODERN DESIGN */
    .newsletter-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 5rem 0;
        margin: 7rem 0;
        position: relative;
        overflow: hidden;
    }

        .newsletter-section::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 500px;
            height: 500px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .newsletter-section::after {
            content: '';
            position: absolute;
            bottom: -30%;
            left: -5%;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
        }

    .newsletter-container {
        position: relative;
        z-index: 2;
        max-width: 800px;
        margin: 0 auto;
        text-align: center;
    }

    .newsletter-icon {
        font-size: 4rem;
        color: white;
        margin-bottom: 2rem;
        animation: float 3s ease-in-out infinite;
    }

    @@keyframes float {
        0%, 100% {
            transform: translateY(0);
        }

        50% {
            transform: translateY(-20px);
        }
    }

    .newsletter-title {
        font-size: 2.8rem;
        font-weight: 800;
        color: white;
        margin-bottom: 1rem;
        letter-spacing: -0.5px;
    }

    .newsletter-subtitle {
        font-size: 1.2rem;
        color: rgba(255, 255, 255, 0.9);
        margin-bottom: 3rem;
        line-height: 1.6;
    }

    .newsletter-form {
        background: white;
        border-radius: 50px;
        padding: 0.5rem;
        display: flex;
        align-items: center;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        max-width: 600px;
        margin: 0 auto;
    }

    .newsletter-input {
        flex: 1;
        border: none;
        outline: none;
        padding: 1rem 1.5rem;
        font-size: 1rem;
        border-radius: 50px;
        color: var(--dark);
    }

        .newsletter-input::placeholder {
            color: var(--gray);
        }

    .newsletter-btn {
        background: linear-gradient(135deg, var(--accent) 0%, #ff6b35 100%);
        color: white;
        border: none;
        padding: 1rem 2.5rem;
        border-radius: 50px;
        font-weight: 700;
        font-size: 1rem;
        cursor: pointer;
        transition: var(--transition);
        text-transform: uppercase;
        letter-spacing: 0.5px;
        white-space: nowrap;
    }

        .newsletter-btn:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(239, 131, 84, 0.4);
        }

        .newsletter-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

    .newsletter-features {
        display: flex;
        justify-content: center;
        gap: 3rem;
        margin-top: 3rem;
        flex-wrap: wrap;
    }

    .feature-item {
        display: flex;
        align-items: center;
        gap: 0.8rem;
        color: white;
    }

        .feature-item i {
            font-size: 1.5rem;
            color: var(--accent);
        }

    .newsletter-message {
        margin-top: 1.5rem;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        font-weight: 500;
        animation: slideDown 0.3s ease;
    }

    @@keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .alert-success {
        background: rgba(40, 167, 69, 0.2);
        color: white;
        border: 1px solid rgba(40, 167, 69, 0.5);
    }

    .alert-danger {
        background: rgba(220, 53, 69, 0.2);
        color: white;
        border: 1px solid rgba(220, 53, 69, 0.5);
    }

    /* Responsive styles */
    @@media (max-width: 992px) {
        .hero-title {
            font-size: 3rem;
        }

        .hero-content {
            padding: 4rem 1.5rem 3rem;
        }

        .promo-card {
            height: 450px;
        }

        .promo-title {
            font-size: 2.2rem;
        }

        .newsletter-title {
            font-size: 2.2rem;
        }

        .newsletter-subtitle {
            font-size: 1rem;
        }
    }

    @@media (max-width: 768px) {
        .products {
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 1.5rem;
        }

        .product-img {
            height: 280px;
        }

        .hero-title {
            font-size: 2.5rem;
        }

        .hero-subtitle {
            font-size: 1.2rem;
        }

        .promo-content {
            padding: 2rem;
        }

        .value-item {
            flex: 0 0 calc(50% - 2rem);
        }

        .newsletter-form {
            flex-direction: column;
            gap: 1rem;
            padding: 1.5rem;
            border-radius: 20px;
        }

        .newsletter-input {
            width: 100%;
        }

        .newsletter-btn {
            width: 100%;
        }

        .newsletter-features {
            gap: 1.5rem;
        }
    }

    @@media (max-width: 576px) {
        .products {
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 1.2rem;
        }

        .product-img {
            height: 220px;
        }

        .products .product-title {
            padding: 0.8rem 0.8rem 0.4rem;
            font-size: 0.9rem;
        }

        .products .product-price {
            padding: 0 0.8rem 0.8rem;
            font-size: 1rem;
        }

        .products .product-btn {
            margin: 0 0.8rem 0.8rem;
            font-size: 0.8rem;
            padding: 0.6rem 0.8rem;
        }

        .hero-title {
            font-size: 2rem;
        }

        .hero-subtitle {
            font-size: 1rem;
            margin-bottom: 1.5rem;
        }

        .hero-btn {
            padding: 0.8rem 1.5rem;
            font-size: 0.8rem;
            display: block;
            margin-bottom: 1rem;
        }

        .promo-title {
            font-size: 1.8rem;
        }

        .promo-text {
            font-size: 0.9rem;
        }

        .brand-title {
            font-size: 1.8rem;
        }

        .brand-text {
            font-size: 1rem;
        }

        .newsletter-title {
            font-size: 1.8rem;
        }

        .newsletter-subtitle {
            font-size: 0.9rem;
        }

        .newsletter-icon {
            font-size: 3rem;
        }
    }

    /* Animation */
    @@keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @@keyframes fadeIn {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    .animate-fadeInUp {
        animation: fadeInUp 1s ease;
    }

    .animate-fadeIn {
        animation: fadeIn 1s ease;
    }

    .delay-1 {
        animation-delay: 1s;
    }

    .delay-2 {
        animation-delay: 1s;
    }

    .delay-3 {
        animation-delay: 1s;
    }

    /* Success Popup Modal */
    .success-popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 9999;
        animation: fadeIn 0.3s ease;
    }

    .success-popup.show {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .popup-content {
        background: white;
        border-radius: 20px;
        padding: 3rem;
        max-width: 500px;
        width: 90%;
        text-align: center;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        animation: slideUp 0.4s ease;
        position: relative;
    }

    @@keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @@keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(50px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .popup-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        animation: scaleIn 0.5s ease 0.2s both;
    }

    @@keyframes scaleIn {
        from {
            transform: scale(0);
        }
        to {
            transform: scale(1);
        }
    }

    .popup-icon i {
        font-size: 2.5rem;
        color: white;
    }

    .popup-title {
        font-size: 2rem;
        font-weight: 700;
        color: #28a745;
        margin-bottom: 1rem;
    }

    .popup-message {
        font-size: 1.1rem;
        color: #666;
        margin-bottom: 2rem;
        line-height: 1.6;
    }

    .popup-close-btn {
        background: linear-gradient(135deg, var(--accent) 0%, #ff6b35 100%);
        color: white;
        border: none;
        padding: 1rem 3rem;
        border-radius: 50px;
        font-weight: 700;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .popup-close-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 20px rgba(239, 131, 84, 0.4);
    }

    .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        background: var(--accent);
        animation: confettiFall 3s ease-out forwards;
    }

    @@keyframes confettiFall {
        to {
            transform: translateY(100vh) rotate(360deg);
            opacity: 0;
        }
    }

    /* Loading Spinner */
    .spinner-border-sm {
        width: 1rem;
        height: 1rem;
        border-width: 0.2em;
    }

    /* Responsive */
    @@media (max-width: 768px) {
        .popup-content {
            padding: 2rem;
        }

        .popup-title {
            font-size: 1.5rem;
        }
    }
</style>

<!-- Hero Section with Slideshow -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center py-5">
            <div class="col-lg-6 hero-content">
                <h1 class="hero-title animate-fadeInUp">
                    Nâng cao phong cách của bạn
                </h1>
                <p class="hero-subtitle animate-fadeInUp delay-1">
                    Khám phá bộ sưu tập thời trang nam cao cấp của chúng tôi được thiết kế dành cho quý ông hiện đại
                </p>
                <div class="animate-fadeInUp delay-2">
                    <a href="@Url.Action("QuanAo", "Product", new { slug = "Quần áo".ToSlug() })" class="hero-btn hero-btn-primary">
                        <i class="bi bi-bag me-2"></i>Bộ sưu tập
                    </a>
                    <a href="@Url.Action("PhuKien", "Product")" class="hero-btn hero-btn-outline">
                        <i class="bi bi-gem me-2"></i>Phụ kiện
                    </a>
                </div>
            </div>
            <div class="col-lg-6 text-center animate-fadeInUp delay-3">
                <div class="hero-slideshow">
                    <div class="slideshow-container">
                        <div class="slide fade active">
                            <img src="~/Images/demo/TRADE_BANNER_1200X675_280825.png" class="img-fluid hero-image" alt="Men's Fashion Collection 1">
                        </div>
                        <div class="slide fade">
                            <img src="~/Images/demo/hc_img_1_1024x1024.png" class="img-fluid hero-image" alt="Men's Fashion Collection 2">
                        </div>
                        <div class="slide fade">
                            <img src="~/Images/demo/hc_img_2_large.png" class="img-fluid hero-image" alt="Men's Fashion Collection 3">
                        </div>

                        <div class="slideshow-indicators">
                            <span class="indicator active" onclick="currentSlide(1)"></span>
                            <span class="indicator" onclick="currentSlide(2)"></span>
                            <span class="indicator" onclick="currentSlide(3)"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Brand Values Banner -->
<section class="brand-banner">
    <div class="container">
        <div class="brand-content animate-fadeIn">
            <h2 class="brand-title">CRAFTED FOR EXCELLENCE</h2>
            <p class="brand-text">Cam kết về chất lượng và phong cách của chúng tôi định hình mọi sản phẩm chúng tôi tạo ra. Mỗi sản phẩm đều được thiết kế tỉ mỉ dành cho người đàn ông hiện đại, trân trọng vẻ đẹp tinh tế và tay nghề thủ công xuất sắc.</p>

            <div class="brand-values">
                <div class="value-item">
                    <div class="value-icon">
                        <i class="bi bi-award"></i>
                    </div>
                    <h3 class="value-title">Premium Quality</h3>
                    <p class="value-text">
                        Vật liệu tốt nhất và tay nghề thủ công hoàn hảo
                    </p>
                </div>
                <div class="value-item">
                    <div class="value-icon">
                        <i class="bi bi-palette"></i>
                    </div>
                    <h3 class="value-title">Timeless Design</h3>
                    <p class="value-text">
                        Phong cách tinh tế vượt qua xu hướng
                    </p>
                </div>
                <div class="value-item">
                    <div class="value-icon">
                        <i class="bi bi-shield-check"></i>
                    </div>
                    <h3 class="value-title">Authentic</h3>
                    <p class="value-text">
                        Sản phẩm chính hãng có bảo hành thương hiệu
                    </p>
                </div>
                <div class="value-item">
                    <div class="value-icon">
                        <i class="bi bi-gem"></i>
                    </div>
                    <h3 class="value-title">Exclusive</h3>
                    <p class="value-text">
                        Bộ sưu tập giới hạn dành cho quý ông sành điệu
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Promo -->
<section class="promo-section">
    <div class="container">
        <div class="row">
            <div class="col-md-8 mb-4">
                <div class="promo-card">
                    <div class="video-wrapper" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; overflow: hidden;">
                        <video autoplay muted loop playsinline class="promo-video" style="width: 100%; height: 100%; object-fit: cover;">
                            <source src="~/Videos/ADAM STORE I THỜI TRANG CHO QUÝ ÔNG HIỆN ĐẠI.mp4" type="video/mp4">
                            <source src="~/videos/fashion-promo.webm" type="video/webm">
                            <!-- Hình ảnh dự phòng khi trình duyệt không hỗ trợ video -->
                            <img src="~/Images/demo/bg-fashion.jpg" alt="Men's Collection" class="promo-image">
                        </video>
                    </div>
                    <div class="promo-overlay"></div>
                    <div class="promo-content">
                        <span class="promo-badge">Limited Time Offer</span>
                        <h2 class="promo-title">
                            GIẢM GIÁ THEO MÙA LÊN ĐẾN 50%
                        </h2>
                        <p class="promo-text">
                            Nâng cấp tủ quần áo của bạn với bộ sưu tập trang phục nam cao cấp độc quyền của chúng tôi
                        </p>
                        <a href="@Url.Action("QuanAo", "Product", new { slug = "Quần áo".ToSlug() })" class="promo-btn">Mua ngay</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="promo-card">
                    <img src="~/Images/demo/demo.webp" alt="Men's Accessories" class="promo-image">
                    <div class="promo-overlay"></div>
                    <div class="promo-content">
                        <span class="promo-badge">
                            Hàng mới đến
                        </span>
                        <h2 class="promo-title">
                            PHỤ KIỆN
                        </h2>
                        <p class="promo-text">
                            Hoàn thiện vẻ ngoài của bạn với các phụ kiện cao cấp của chúng tôi
                        </p>
                        <a href="@Url.Action("PhuKien", "Product")" class="promo-btn">Explore</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- New Products -->
<div class="title">HÀNG MỚI</div>
<div class="products">
    @foreach (var p in Model.NewProducts)
    {
        <div class="product-card">
            <span class="product-badge">New</span>
            <a asp-controller="Product" asp-action="Detail" asp-route-id="@p.ItemsId">
                <img src="@(string.IsNullOrEmpty(p.Image) || p.Image == "no-image.png"
                    ? "/Images/products/no-image.png"
                    : (p.Image.StartsWith("http") ? p.Image : $"/Images/products/{p.Image}"))"
                     alt="@p.ItemsName" class="product-img" />
            </a>
            <div class="product-title">
                <a class="text-dark text-decoration-none"
                   asp-controller="Product" asp-action="Detail" asp-route-id="@p.ItemsId">@p.ItemsName</a>
            </div>
            <div class="product-price">@string.Format("{0:N0} đ", p.SellPrice)</div>
            <a class="product-btn" asp-controller="Product" asp-action="Detail" asp-route-id="@p.ItemsId">
                <i class="bi bi-bag me-2"></i>Mua Ngay
            </a>
        </div>
    }
</div>
<div class="text-center mt-4 mb-5">
    <a class="view-more-btn" asp-controller="Product" asp-action="QuanAo" asp-route-slug="@("Quần áo".ToSlug())">
        <i class="bi bi-grid me-2"></i>Xem Quần Áo
    </a>
    <a class="view-more-btn" asp-controller="Product" asp-action="PhuKien" asp-route-slug="@("Phụ kiện".ToSlug())">
        <i class="bi bi-gem me-2"></i>Xem Phụ Kiện
    </a>
</div>

<!-- Hot Products -->
<div class="title">Bán Chạy</div>
<div class="products">
    @foreach (var p in Model.HotProducts)
    {
        <div class="product-card">
            <a asp-controller="Product" asp-action="Detail" asp-route-id="@p.ItemsId">
                <img src="@(string.IsNullOrEmpty(p.Image) || p.Image == "no-image.png"
                    ? "/Images/products/no-image.png"
                    : (p.Image.StartsWith("http") ? p.Image : $"/Images/products/{p.Image}"))"
                     alt="@p.ItemsName" class="product-img" />
            </a>
            <div class="product-title">
                <a class="text-dark text-decoration-none"
                   asp-controller="Product" asp-action="Detail" asp-route-id="@p.ItemsId">@p.ItemsName</a>
            </div>
            <div class="product-price">@string.Format("{0:N0} đ", p.SellPrice)</div>
            <a class="product-btn" asp-controller="Product" asp-action="Detail" asp-route-id="@p.ItemsId">
                <i class="bi bi-bag me-2"></i>Mua Ngay
            </a>
        </div>
    }
</div>

<!-- MODERN NEWSLETTER SECTION -->
<section class="newsletter-section">
    <div class="container">
        <div class="newsletter-container">
            <div class="newsletter-icon">
                <i class="bi bi-envelope-heart"></i>
            </div>
            <h2 class="newsletter-title">Đăng Ký Nhận Tin Khuyến Mãi</h2>
            <p class="newsletter-subtitle">
                Nhận ngay mã giảm giá <strong>10%</strong> cho đơn hàng đầu tiên và cập nhật những xu hướng thời trang mới nhất!
            </p>
            
            <form action="https://nttu.us8.list-manage.com/subscribe/post?u=0e2357ffef311679b247a0efd&amp;id=011dd85a52&amp;f_id=00721ee0f0" 
                  method="post" 
                  id="mc-embedded-subscribe-form" 
                  name="mc-embedded-subscribe-form" 
                  class="newsletter-form" 
                  target="_blank">
                
                <input type="email" 
                       name="EMAIL" 
                       class="newsletter-input" 
                       id="mce-EMAIL" 
                       placeholder="Nhập địa chỉ email của bạn..." 
                       required>
                
                <!-- Honeypot for bot prevention -->
                <div style="position: absolute; left: -5000px;" aria-hidden="true">
                    <input type="text" name="b_0e2357ffef311679b247a0efd_011dd85a52" tabindex="-1" value="">
                </div>
                
                <button type="submit" class="newsletter-btn" name="subscribe" id="mc-embedded-subscribe">
                    <i class="bi bi-send me-2"></i> Đăng Ký Ngay
                </button>
            </form>

            <div id="newsletter-message" class="newsletter-message" style="display: none;"></div>

            <div class="newsletter-features">
                <div class="feature-item">
                    <i class="bi bi-gift-fill"></i>
                    <span>Ưu đãi độc quyền</span>
                </div>
                <div class="feature-item">
                    <i class="bi bi-bell-fill"></i>
                    <span>Sản phẩm mới nhất</span>
                </div>
                <div class="feature-item">
                    <i class="bi bi-star-fill"></i>
                    <span>Tips thời trang</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Success Popup Modal -->
<div class="success-popup" id="success-popup">
    <div class="popup-content">
        <div class="popup-icon">
            <i class="bi bi-check-lg"></i>
        </div>
        <h3 class="popup-title">Đăng Ký Thành Công!</h3>
        <p class="popup-message">
            Cảm ơn bạn đã đăng ký nhận tin! <br>
            Vui lòng kiểm tra email để xác nhận và nhận mã giảm giá <strong>10%</strong>.
        </p>
        <button class="popup-close-btn" onclick="closePopup()">
            Đóng
        </button>
    </div>
</div>

@section Scripts {
    <script>
        // Slideshow functionality
        let slideIndex = 1;

        // Start slideshow automatically
        window.addEventListener('DOMContentLoaded', () => {
            showSlides(slideIndex);
            setInterval(() => {
                plusSlides(1);
            }, 3000); // Change image every 3 seconds
        });

        // Next/previous controls
        function plusSlides(n) {
            showSlides(slideIndex += n);
        }

        // Thumbnail controls
        function currentSlide(n) {
            showSlides(slideIndex = n);
        }

        function showSlides(n) {
            let slides = document.getElementsByClassName("slide");
            let indicators = document.getElementsByClassName("indicator");

            if (n > slides.length) {
                slideIndex = 1;
            }

            if (n < 1) {
                slideIndex = slides.length;
            }

            // Hide all slides
            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.remove("active");
            }

            // Remove active from all indicators
            for (let i = 0; i < indicators.length; i++) {
                indicators[i].classList.remove("active");
            }

            // Show current slide and set active indicator
            slides[slideIndex - 1].classList.add("active");
            indicators[slideIndex - 1].classList.add("active");
        }

        // ===== NEWSLETTER FORM HANDLING WITH AJAX - NO REDIRECT =====
        document.getElementById('mc-embedded-subscribe-form').addEventListener('submit', function(e) {
            e.preventDefault(); // NGĂN FORM SUBMIT BÌNH THƯỢNG
            
            const form = this;
            const emailInput = document.getElementById('mce-EMAIL');
            const submitBtn = document.getElementById('mc-embedded-subscribe');
            const email = emailInput.value.trim();

            // Validation
            if (!email || !isValidEmail(email)) {
                alert('Vui lòng nhập địa chỉ email hợp lệ!');
                return;
            }

            // Show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Đang xử lý...';

            // AJAX request to Mailchimp using JSONP to avoid CORS
            const mailchimpUrl = 'https://nttu.us8.list-manage.com/subscribe/post-json?u=0e2357ffef311679b247a0efd&id=011dd85a52';
            
            // Create JSONP request
            const url = mailchimpUrl + '&EMAIL=' + encodeURIComponent(email) + '&c=?';
            const script = document.createElement('script');
            script.src = url;
            document.body.appendChild(script);
            
            // Set timeout to show popup after 1.5 seconds
            setTimeout(() => {
                // Reset button
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="bi bi-send me-2"></i> Đăng Ký Ngay';
                
                // Clear email input
                emailInput.value = '';
                
                // Show success popup
                showSuccessPopup();
                
                // Remove script
                document.body.removeChild(script);
            }, 1500);
        });

        // Email validation
        function isValidEmail(email) {
            const re = /^[^\s@@]+@@[^\s@@]+\.[^\s@@]+$/;
            return re.test(email);
        }

        // Show success popup with confetti effect
        function showSuccessPopup() {
            const popup = document.getElementById('success-popup');
            popup.classList.add('show');
            
            // Add confetti effect
            createConfetti();
        }

        // Create confetti animation
        function createConfetti() {
            const popup = document.querySelector('.popup-content');
            const colors = ['#ef8354', '#ff6b35', '#667eea', '#764ba2', '#28a745', '#ffc107'];
            
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                popup.appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => {
                    confetti.remove();
                }, 3000);
            }
        }

        // Close popup
        function closePopup() {
            const popup = document.getElementById('success-popup');
            popup.classList.remove('show');
        }

        // Close popup when clicking outside
        document.getElementById('success-popup').addEventListener('click', function(e) {
            if (e.target === this) {
                closePopup();
            }
        });
    </script>
}

